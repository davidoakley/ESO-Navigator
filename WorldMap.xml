<GuiXml>
    <Controls>
	
	    <Control name="MapSearch_WorldMapCategoryRow" virtual="true">
			<OnInitialized>
				self.offsetX = 30
				self.label = self:GetNamedChild("Label")
				--self.icon = self:GetNamedChild("Icon")
				--self.icon:SetDrawLayer(self.label:GetDrawLayer() + 1)
				self.label.GetTextColor = function() return GetInterfaceColor(INTERFACE_COLOR_TYPE_TEXT_COLORS, INTERFACE_TEXT_COLOR_SELECTED) end
			</OnInitialized>
            <Dimensions x="285" y="40"/>
            <Controls>
				<!--<Texture name="$(parent)Icon" textureFile="EsoUI/Art/Quest/questJournal_trackedQuest_icon.dds" hidden="false" mouseEnabled="true">
					<Dimensions x="25" y="25"/>
					<Anchor point="TOPLEFT" offsetX="0" offsetY="14" />
					<TextureCoords top="0" bottom="1" left="0" right="1"/>
				</Texture>-->
				<Label name="$(parent)Label" inherits="ZO_SelectableLabel" font="ZoFontHeader2" color="INTERFACE_COLOR_TYPE_TEXT_COLORS:INTERFACE_TEXT_COLOR_SELECTED" modifyTextType="UPPERCASE">
					<Anchor point="TOPLEFT" offsetX="0" offsetY="14"/>
					<OnMouseDown>
						--self:GetParent():RowMouseDown(button)
					</OnMouseDown>
					<OnMouseUp>
						--MapSearch.MapTab:rowMouseUp()
					</OnMouseUp>
				</Label>
            </Controls>
        </Control>
		
        <Control name="MapSearch_WorldMapWayshrineRow" virtual="true" mouseEnabled="true">
			<OnInitialized>
				self.offsetX = 30
				self.label = self:GetNamedChild("Label")
				self.icon = self:GetNamedChild("Icon")
				self.arrow = self:GetNamedChild("Arrow")
				self.bg = self:GetNamedChild("BG")
				self.icon:SetDrawLayer(self.label:GetDrawLayer() + 1)
			</OnInitialized>
            <Dimensions y="25"/>
            <Controls>
			<!-- EsoUI/Art/Buttons/ESO_buttonLarge_normal.dds  -->
				<Texture name="$(parent)BG" textureFile="/esoui/art/miscellaneous/listitem_backdrop.dds" hidden="true" mouseEnabled="false">
		            <Dimensions y="30"/>
					<Anchor point="TOPLEFT" offsetX="0" offsetY="0" />
					<Anchor point="TOPRIGHT" offsetX="0" offsetY="0" />
				</Texture>
				<Texture name="$(parent)Icon" textureFile="EsoUI/Art/Quest/questJournal_trackedQuest_icon.dds" hidden="false" mouseEnabled="false">
					<Dimensions x="23" y="23"/>
					<Anchor point="TOPLEFT" offsetX="10" offsetY="1" />
					<TextureCoords top="0" bottom="1" left="0" right="1"/>
				</Texture>
				<Control name="$(parent)Arrow" hidden="true" mouseEnabled="false" resizeToFitDescendents="true">
					<Anchor point="TOPRIGHT" offsetX="0" offsetY="1" />
					<Controls>
						<Label name="$(parent)Label" font="$(MEDIUM_FONT)|$(KB_16)" text="Enter" layer="OVERLAY" horizontalAlignment="CENTER">
							<Anchor point="TOPRIGHT" offsetX="-8"/>
						</Label>
						<Backdrop name="$(parent)Bg" inherits="ZO_LargeKeyBackdrop" alpha="1">
							<Anchor point="TOPLEFT" relativeTo="$(parent)Label" offsetX="-8"/>
							<Anchor point="TOPRIGHT" offsetX="0"/>
							<Dimensions y="23"/>
						</Backdrop>

						<!-- <Texture name="$(parent)Tex" textureFile="esoui/art/tutorial/smithing_rightarrow_up.dds">
							<AnchorFill/>
						</Texture> -->
					</Controls>
				</Control>
				<Label name="$(parent)Label" inherits="ZO_SelectableLabel" font="ZoFontHeader" wrapMode="ELLIPSIS" mouseEnabled="false">
					<Anchor point="TOPLEFT" relativeTo="$(parent)Icon" relativePoint="TOPRIGHT" offsetX="6" offsetY="0" />
					<Anchor point="TOPRIGHT" relativeTo="$(parent)Arrow" relativePoint="TOPLEFT" />
		            <Dimensions y="24" />
				</Label>
            </Controls>
			<OnMouseUp>
				MapSearch.MapTab:rowMouseUp(self, button, upInside)
			</OnMouseUp>
        </Control>
        
        
        <TopLevelControl name="MapSearch_WorldMapTab" inherits="ZO_WorldMapInfoContent">
            <OnInitialized>
				local logger = LibDebugLogger("MapSearch")
				logger:Info("MapSearch_WorldMapTab.OnInitialized")
				-- self.sortOrderDropDown = ZO_ComboBox_ObjectFromContainer(self:GetNamedChild("SortOrder"))
				-- self.sortAllOrderDropDown = ZO_ComboBox_ObjectFromContainer(self:GetNamedChild("SortAllOrder"))
                self.list = self:GetNamedChild("List")
				self.edit = self:GetNamedChild("SearchEdit")
				self.fragment = ZO_FadeSceneFragment:New(self)
				self.fragment.duration = 100
				-- ZO_ScrollList_AddDataType(self.list,0,"MapSearch_WorldMapWayshrineCategoryRow", 23, function(control, data) self:RefreshRow(control,data) end)
				-- ZO_ScrollList_AddDataType(self.list,1,"MapSearch_WorldMapWayshrineRow", 23, function(control, data) self:RefreshRow(control,data) end)
	        </OnInitialized>
            <Controls>
				<Backdrop name="$(parent)Search" tier="HIGH" XedgeColor="000000" inherits="ZO_SingleLineEditBackdrop_Keyboard" maxHeight="40" mouseEnabled="true">
					<Anchor point="TOPLEFT" relativeTo="$(parent)" relativePoint="TOPLEFT" offsetX="0" offsetY="-30"/>
                    <Anchor point="TOPRIGHT" relativeTo="$(parent)" relativePoint="TOPRIGHT" offsetX="0" offsetY="-30" />

					<Controls>
						<EditBox name="$(parent)Edit" maxInputCharacters="30" inherits="ZO_DefaultEditForBackdrop ZO_EditDefaultText" newLineEnabled="true" XkeyboardEnabled="true">
							<OnInitialized>
								--TraderTravel.MapTabWayshrines.ResetFilter(self, TraderTravel_WorldMapWayshrinesList, true)
							</OnInitialized>
							<OnEnter>
								MapSearch.MapTab.jumpToResult()
							</OnEnter>
							<OnEscape>
								self:LoseFocus()
								--TraderTravel.MapTabWayshrines.ResetFilter(self, TraderTravel_WorldMapWayshrinesList, false)
							</OnEscape>
							<OnEffectivelyShown>
								MapSearch.MapTab.resetFilter(false)
								self:TakeFocus()
							</OnEffectivelyShown>
							<OnTextChanged>
								MapSearch.MapTab.onTextChanged(self, MapSearch_WorldMapTabList)
							</OnTextChanged>
							<OnMouseDown>
								self:TakeFocus()
								ZO_EditDefaultText_Disable(self)
							</OnMouseDown>
							<OnDownArrow>
								MapSearch.MapTab.nextResult()
							</OnDownArrow>
							<OnUpArrow>
								MapSearch.MapTab.previousResult()
							</OnUpArrow>
							<OnTab>
							</OnTab>
						</EditBox>
						<Button name="$(parent)Clear" tier="HIGH">
							<Anchor point="TOPRIGHT" relativeTo="$(parent)" relativePoint="TOPRIGHT" offsetX="-5" offsetY="5"/>
							<OnMouseUp>MapSearch.MapTab.ResetFilter(false)</OnMouseUp>
							<Dimensions x="23" y="23" />
							<Textures 	normal="EsoUI/art/buttons/decline_up.dds"
										pressed="EsoUI/art/buttons/decline_down.dds"
										mouseOver="EsoUI/art/buttons/decline_over.dds"
							/>
						</Button>
						
					</Controls>
				</Backdrop>

                <Control name="$(parent)List" inherits="ZO_ScrollList">
					<Dimensions x="285" y="400" />
                    <Anchor point="TOPLEFT" relativeTo="$(parent)Search" relativePoint="BOTTOMLEFT" offsetY="5" />
                    <Anchor point="BOTTOMRIGHT" />
                </Control>

            </Controls>
        </TopLevelControl>
    </Controls>
</GuiXml>